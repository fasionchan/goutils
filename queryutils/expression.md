---
author: fasion
date:
---

- $D$ 表示任意数据，类型为 $T_D$，注入器为 $S_D$ ；
- $E$ 表示一个合法的注入表达式；
- $S_D(D, E)$ 表示使用注入器 $S_D$ 对数据 $D$ 执行 $E$ 注入；
- $S_D(D, E_1, E_2, …, E_n)$ 表示使用注入器 $S_D$ 对数据 $D$ 执行 $E_1$  $E_2$ … $E_n$注入；
- $N$ 表示合法的字段名或方法名；
- $D.N$ 表示数据 $D$ 的子数据；
  - 若 $N$ 为字段名，则 $D.N$ 为数据 $D$ 的字段 $N$ ；
  - 若 $N$ 为方法名，则 $D.N$ 为数据 $D$ 调用方法 $N$ 的返回值；
    - $N$ 为 *Transform* 方法，没有参数，且只有一个返回值；

- $(E)$ 是合法的注入表达式，等价于 $E$ ；
- $-E$ 是合法的注入表达式，等价于 $E$ ；
- $.E$ 是合法的注入表达式，等价于 $E$ ；
  - 实现上，先解析 $E$ ，而不是直接由注入器 $S_D$ 处理；
- $(E_1)(E_2)…(E_n)$ 是合法的注入表达式，等价于  $E_1$  $E_2$ … $E_n$ ；
  1. 设当前数据为 $D$ ，注入器为 $S_D$ ；
  2. 该表达式表示对数据 $D$ 执行 $E_1$  $E_2$ … $E_n$注入；
  3. 即 $S_D(D, E_1, E_2, …, E_n)$ ；

- $N-E$ 是合法的注入表达式，表示对子数据 $D.N$ 执行 $E$ 注入；
  1. 设前数据为 $D$ ；
  2. 定位到子数据 $D.N$ ；
  3. 根据子数据类型 $T_{D.N}$ 定位到子数据注入器 $S_{D.N}$ ；
  4. 对子数据 $D.N$ 进行 $E$ 注入，即 $S_{D.N}(D.N，E)$；
- $N(E)$ 是合法的注入表达式，等价于 $N-E$ ；
  - 实现上，先解析 $E$ ，而不是直接由注入器 $S_{D.N}$ 处理；

- $N.E$ 是合法的注入表达式，等价于 $N-E$ ；
  - 实现上，先解析 $E$ ，而不是直接由注入器 $S_{D.N}$ 处理；
- $N_1.N_2...N_n$ 是合法的注入表达式，但无注入效果（仅遍历了子数据） ；



$N((-E)(.N_1-E_1)(.N_2-E_2)(.N_2.N_3-E_3))$



- $N-(E_1)(E_2)…(E_n)$ 是合法的注入表达式，表示对子数据 $D.N$ 执行 $E_1$  $E_2$ … $E_n$注入；
  1. 设前数据为 $D$ ；
  2. 定位到子数据 $D.N$ ；
  3. 根据子数据类型 $T_{D.N}$ 定位到子数据注入器 $S_{D.N}$ ；
  4. 对子数据 $D.N$ 执行 $E_1$  $E_2$ … $E_n$注入，即  $S_{D.N}(D.N, E_1, E_2, …, E_n)$；
- $N_1-N_2-E$ 是合法的注入表达式，表示对子数据 $D.N_1$ 执行 $N_2-E$ 注入；
  1. 设前数据为 $D$ ；
  2. 定位到子数据 $D.N_1$ ；
  3. 根据子数据类型 $T_{D.N_1}$ 定位到子数据注入器 $S_{D.N_1}$ ；
  4. 对子数据 $D.N_1$ 进行 $N_2-E$ 注入，即 $S_{D.N_1}(D.N_1, N_2-E)$；

- $N_1.N_2...N_n-E$ 是合法的注入表达式，表示对子数据 $D.N_1.N_2...N_n$ 执行 $E$ 注入；
  1. 设前数据为 $D$ ；
  2. 定位到子数据 $D.N_1.N_2…N_n$ ；
  3. 对子数据 $D.N_1.N_2...N_n$ 进行 $E$ 注入，即 $S_{D.N_1.N_2...N_n}(D.N_1.N_2...N_n，E)$；

```text
(
	(-Cluster)
	(.Clusters(
		(App)
		(.Apps(
			(System)
		))
	))
)
```

